(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[475],{7496:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/new",function(){return t(1518)}])},5290:function(e,n,t){"use strict";var r=t(2253),a=t(4932),l=t(7702),o=t(5893);n.Z=function(e){var n=e.children,t=(0,l._)(e,["children"]);return(0,o.jsx)("button",(0,a._)((0,r._)({},t),{className:"mt-5 rounded bg-blue-400 py-4 text-white ".concat(t.className),children:n}))}},4521:function(e,n,t){"use strict";var r=t(2253),a=t(4932),l=t(7702),o=t(5893),i=(0,t(7294).forwardRef)(function(e,n){var t=e.error,i=e.className,s=(0,l._)(e,["error","className"]);return(0,o.jsx)("input",(0,a._)((0,r._)({ref:n},s),{className:"h-[50px] w-full rounded border px-4 py-3 outline-0 ".concat(t?"border-red-600":"").concat(i)}))});i.displayName="Input",n.Z=i},5413:function(e,n,t){"use strict";var r=t(5893);t(7294),n.Z=function(e){var n=e.title,t=e.htmlFor;return(0,r.jsx)("label",{className:"mt-4 w-full",htmlFor:t,children:(0,r.jsx)("p",{className:"mb-1 font-bold",children:n})})}},1518:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return T}});var r=t(5893),a=t(1010),l=t(2253),o=t(4932),i=t(7702),s=t(1309),c=t(7582),u=t(7536),d=t(4521),f=t(5152),m=t.n(f);t(8514);var h=t(7294),v=m()(Promise.all([t.e(937),t.e(167)]).then(t.t.bind(t,1167,23)),{loadableGenerated:{webpack:function(){return[1167]}},ssr:!1}),g=function(e){var n=e.control,t=(0,u.bc)({name:"contents",control:n}).field;return(0,h.useState)(),(0,r.jsx)(v,{theme:"snow",value:t.value,onChange:function(e){t.onChange(e)}})},x=t(5290),p=t(5413),b=t(6312),j=t(4586),_=function(e){var n=e.imagesLength,t=e.onChange,a=e.images,l=e.removeFile,o=(0,h.useRef)(null),i=function(e,n){e.preventDefault(),l(n)};return(0,r.jsxs)("div",{className:"m-auto w-full border py-20 text-center",children:[(0,r.jsx)("div",{className:"mb-2 font-bold",children:"여러장의 사진을 업로드해보세요"}),(0,r.jsx)("div",{className:"flex justify-center text-sm text-gray-400",children:a.length>0?a.map(function(e,n){return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:e.name}),(0,r.jsx)("button",{className:"mt-2 rounded-full bg-gray-400 px-1 text-sm text-white",onClick:function(e){return i(e,n)},children:"Delete"})]},n)}):(0,r.jsx)("p",{children:"이미지를 업로드해주세요"})}),(0,r.jsx)(x.Z,{className:" inline-block w-[150px] py-2 disabled:cursor-not-allowed disabled:bg-gray-400",onClick:function(e){var n;e.preventDefault(),null==o||null===(n=o.current)||void 0===n||n.click()},disabled:3==n,children:"사진 업로드"}),(0,r.jsx)(d.Z,{ref:o,type:"file",hidden:!0,multiple:!0,onChange:t,accept:"image/jpeg, image/jpg, image/png"})]})},w=function(e){var n=e.control,t=(0,s._)((0,h.useState)([]),2),a=t[0],l=t[1],o=(0,u.bc)({name:"images",control:n}).field,i=(0,u.qo)({control:n,name:"images"});(0,h.useEffect)(function(){return function(){l([])}},[]);var c=(0,h.useCallback)(function(e){if(e.target.files){var n=(null==o?void 0:o.value)?Array.from(o.value):[],t=Array.from(e.target.files),r=n.map(function(e){return e.name}),a=t.filter(function(e){return!r.includes(e.name)});if(n.length+a.length>3){alert("죄송합니다 이미지는 최대 3개 까지 업로드 가능합니다");return}var i=(0,j._)(n).concat((0,j._)(a)),s=new DataTransfer;if(i){null==i||i.forEach(function(e){return s.items.add(e)});var c=s.files;o.onChange(c),l(i),e.target&&(e.target.value="")}}},[o]),d=(0,h.useCallback)(function(e){var n=a.filter(function(n,t){return t!==e});l(n);var t=new DataTransfer;n.forEach(function(e){return t.items.add(e)});var r=t.files;o.onChange(r)},[a,o]);return(0,r.jsx)(_,{imagesLength:(null==i?void 0:i.length)?i.length:0,onChange:c,images:a,removeFile:d})},N=t(6192),y=t(6180),C={control:function(){return"border-0"},container:function(){return"border w-full"},valueContainer:function(){return"px-4 py-3"},placeholder:function(){return"m-0"},input:function(){return"p-0 m-0"}},k=function(e){var n=e.id,t=e.title,a=e.data,o=e.handleChange,i=e.value;return(0,r.jsxs)("div",{className:"w-[50%]",children:[(0,r.jsx)(p.Z,{htmlFor:n,title:t}),(0,r.jsx)(y.ZP,{classNames:(0,l._)({},C),id:n,required:!0,options:a,value:i?a.find(function(e){return e.value==i}):null,onChange:function(e){o(e)}})]})},Z=function(e){var n=e.control,t=e.data,a=(0,u.bc)({name:"category",control:n}).field,l=a.value,o=a.name,i=a.onChange;return(0,r.jsx)(k,{id:o,value:l,title:"카테고리",data:t,handleChange:function(e){var n=t.find(function(n){return n.value===(null==e?void 0:e.value)});n&&i(n.value)}})},F=function(e){var n=e.control,t=e.currentCategory,a=(0,s._)((0,h.useState)(null),2),l=a[0],o=a[1],i=(0,u.bc)({name:"subcategory",control:n}).field,c=i.name,d=i.onChange;(0,h.useEffect)(function(){o(null)},[t]);var f=(0,N.U)(t).data,m=void 0===f?[]:f;return(0,r.jsx)(k,{id:c,value:l,title:"서브카테고리",data:m,handleChange:function(e){var n=m.find(function(n){return n.value===(null==e?void 0:e.value)});n&&(d(n.value),o(e?e.value:null))}})},E=function(e){var n=e.control,t=(0,N.NL)().data,a=(0,u.qo)({control:n,name:"category"});return(0,r.jsxs)("div",{className:"flex w-full gap-1",children:[(0,r.jsx)(Z,{control:n,data:void 0===t?[]:t}),a&&(0,r.jsx)(F,{control:n,currentCategory:a})]})},z=t(9222),D=t(1163),L=t(2920),S=t(2960),q=t(1604),A=q.z.object({price:q.z.string().min(1),stock:q.z.string().min(1),images:q.z.custom(function(e){return e instanceof FileList}),category:q.z.string(),subcategory:q.z.string(),title:q.z.string(),contents:q.z.string()}),P=function(){var e,n=(0,u.cI)({resolver:(0,b.F)(A)}),t=n.register,f=n.handleSubmit,m=n.control,h=(0,D.useRouter)(),v=(0,s._)((0,z.qX)(),2),j=v[0],_=v[1].isLoading,N=(e=(0,a._)(function(e){var n,t,r,a,l;return(0,c.Jh)(this,function(o){switch(o.label){case 0:for(console.log(e),n=e.images,t=(0,i._)(e,["images"]),r=new FormData,a=0;a<n.length;a++)r.append("images",n[a]);for(var s in t)l=t[s],r.append(s,l);return[4,j(r)];case 1:return o.sent()&&(L.Am.success("상품등록이 완료되었습니다",{position:"top-center"}),L.Am.onChange(function(e){console.log(e),h.push("/")})),[2]}})}),function(n){return e.apply(this,arguments)});return(0,r.jsxs)("form",{onSubmit:f(N),children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(w,{control:m}),(0,r.jsxs)("div",{className:"ml-10 flex w-full flex-col justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(p.Z,{title:"가격",htmlFor:"price"}),(0,r.jsx)(d.Z,(0,o._)((0,l._)({},t("price")),{placeholder:"가격",id:"price",type:"number",defaultValue:0,step:1e3}))]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(p.Z,{htmlFor:"stock",title:"재고"}),(0,r.jsx)(d.Z,(0,o._)((0,l._)({},t("stock")),{placeholder:"재고",type:"number",defaultValue:0,min:1}))]}),(0,r.jsx)("div",{className:"flex gap-10",children:(0,r.jsx)(E,{control:m})})]})]}),(0,r.jsx)("div",{className:"mb-10"}),(0,r.jsx)(d.Z,(0,o._)((0,l._)({},t("title")),{placeholder:"제목",className:"mb-3 rounded-none border-0 border-b border-b-gray-400"})),(0,r.jsx)(g,{control:m}),(0,r.jsx)(x.Z,{className:"w-full disabled:cursor-not-allowed disabled:bg-gray-400",type:"submit",disabled:_,children:_?(0,r.jsx)(S.Z,{color:"#36d7b7"}):"등록"}),(0,r.jsx)(L.Ix,{autoClose:1e3})]})},T=function(){return(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"m-auto max-w-[1000px] pt-10",children:(0,r.jsx)(P,{})})})}}},function(e){e.O(0,[700,633,774,888,179],function(){return e(e.s=7496)}),_N_E=e.O()}]);